<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello world</title>
        <!--<meta name="description" content="">-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1>'Sup Cloudflare!</h1>
        <h2>GET DB</h2>
        <button onclick="get_db()">GET</button>
        <hr>
        <h2>SET COOKIE</h2>
        <button onclick="set_c()">SET</button>
        <h2>GET COOKIE</h2>
        <button onclick="get_c()">GET</button>
        <script>
            async function get_db() {
                try {
                    const response = await fetch("https://api.qseznamka.cz/retrieve");
                    if (!response.ok) {
                      throw new Error(`Response status: ${response.status}`);
                    }                
                    const result = await response.json();
                    console.log(result);
                } catch (error) {
                    console.error(error.message);
                }
            }

            async function get_c() {
                try {
                    const response = await fetch("https://api.qseznamka.cz/get_session");
                    if (!response.ok) {
                      throw new Error(`Response status: ${response.status}`);
                    }                
                    const result = await response.text();
                    console.log(result);
                } catch (error) {
                    console.error(error.message);
                }
            }

            async function set_c() {
                try {
                    const response = await fetch("https://api.qseznamka.cz/set_session", {
                      method: "POST",
                      headers: {
                          "Content-Type": "application/json"
                      },
                      body: JSON.stringify({ message: "123go" })
                    });
                    if (!response.ok) {
                      throw new Error(`Response status: ${response.status}`);
                    }                
                    const result = await response.text();
                    console.log(result);
                } catch (error) {
                    console.error(error.message);
                }
            }

        </script>
    </body>

</html>



